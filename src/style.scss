$remote_files: 0;

/* serif */
@if $remote_files == 1 {
    @import url('http://fonts.googleapis.com/css?family=Crimson+Text');
}
$font: 'Crimson Text', Gentium, 'Liberation Serif', serif;

/* sans-serif */
@if $remote_files == 1 {
    @import url('http://fonts.googleapis.com/css?family=Molengo'); }
$font_sans: 'Molengo', sans-serif;

/* monospace */
@if $remote_files == 1 {
    @import url('http://fonts.googleapis.com/css?family=Inconsolata'); }
$font_mono: Inconsolata, Consolas, monospace;
//@import url('http://fonts.googleapis.com/css?family=Droid+Sans+Mono');
//$font_mono: 'Droid Sans Mono', Inconsolata, Consolas, monospace;
//@import url('http://fonts.googleapis.com/css?family=Anonymous+Pro');
//$font_mono: 'Anonymous Pro', Inconsolata, Consolas, monospace;

$font_general: 11pt $font_sans;
$font_header: 11pt $font_sans;

$bg: #444 url('bg.png') repeat;
$fg: #eee;

// widget colors
$widget_fg: black;
$widget_bg: #ccc;
// selected
$widget_selected_fg: white;
$widget_selected_bg: transparentize(#0af, 0.3);
// current
$widget_current_fg: black;
$widget_current_bg:  transparentize(#6af, 0.3);
// hover
$widget_hover_fg: black;
$widget_hover_bg: transparentize($widget_selected_bg, 0.4);

// button
$button_selected_fg: black;
$button_selected_bg: transparentize($widget_selected_bg, 0.2);
$button_hover_fg: black;
$button_hover_bg: transparentize($button_selected_bg, 0.2);

// text edit
$font_edit: 11pt $font_mono;
//$font_edit: 10pt $font_sans;
$font_linenumber: 11pt $font_mono;
$edit_bg: opacify($widget_bg,1)*3;
$edit_fg: black;
// focused
$edit_focused_bg: $edit_bg + #222;
$edit_focused_fg: #555;
// text selection
$edit_selected_bg: #69f;
$edit_selected_fg: black;
// current line
$line_current_fg: black;
// line numbers
$linenumber_fg: transparentize($edit_fg, 0.5);
$linenumber_bg: transparent;
$linenumber_current_fg: #a40;

$imageview_padding: 4px;

$window_layer:3;
$top_window_layer:9999;
$window_opacity: 0.5;
$top_window_opacity: 1;

$tab_radius: 2px;
$item_radius: 3px;
$title_radius: 0px;
$window_radius: 0px;

/* helper functions {{{ */
@mixin rounded($radius: 10px, $side1: 0, $side2: 0) {
    @if $side1 == 0 {
        border-radius: $radius;
        -moz-border-radius: $radius;
        -webkit-border-radius: $radius;
    } @else if $side2 == 0 {
        border-#{$side1}-radius: $radius;
        -moz-border-radius-#{$side1}: $radius;
        -webkit-border-radius-#{$side1}: $radius;
    } @else {
        border-#{$side1}-#{$side2}-radius: $radius;
        -moz-border-radius-#{$side1}#{$side2}: $radius;
        -webkit-border-radius-#{$side1}#{$side2}: $radius;
    }
}

@mixin transitions($transition) {
    -webkit-transition: unquote($transition);
    -moz-transition: unquote($transition);
    -o-transition: unquote($transition);
    transition: unquote($transition);
}

@mixin transitionsx($transition) {
    -webkit-transition: -webkit-#{unquote($transition)};
    -moz-transition: -moz-#{unquote($transition)};
    -o-transition: -o-#{unquote($transition)};
    transition: unquote($transition);
}

@mixin box-shadow($shadow) {
    box-shadow: $shadow;
    -webkit-box-shadow: $shadow;
    -moz-box-shadow: $shadow;
    -o-box-shadow: $shadow;
}

@mixin selection() {
    /* animate cursor movement */
    @include transitions("opacity .2s ease-in-out, background-color .2s ease-in-out, left .06s ease-in-out, top .06s ease-in-out, width .06s ease-in-out, height .06s ease-in-out");
}

@mixin outset($outset_bg:$widget_bg, $outset_shadow:$widget_bg, $depth:2px) {
    border: $depth solid $outset_bg * 0.4 + $outset_shadow * 0.4;
    border-left: $depth solid $outset_bg * 0.4 + $outset_shadow * 1.1;
    border-top: $depth solid $outset_bg * 0.4 + $outset_shadow * 1.1;
    @include box-shadow(0 0 8px transparentize(black, 0.2));
}

@mixin inset($inset_bg:$widget_bg, $inset_shadow:$widget_bg, $depth:1px) {
    border: $depth solid $inset_bg * 0.4 + $inset_shadow * 0.4;
    border-right: $depth solid $inset_bg * 0.2 + $inset_shadow;
    border-bottom: $depth solid $inset_bg * 0.2 + $inset_shadow;
    @include box-shadow(inset 0 0 4px transparentize($inset_shadow*0.5, 0.6));
}
// }}}

body {
    background: $bg;
    margin: 0;
    padding: 0;
    //width: 100%;
    //height: 100%;
    //overflow:hidden;
}

input, textarea, .tabs, .input, .close, .title {outline: 0}

.window .title, .tab, .widgetlistitem, .button, .imageview {
    &.focused {
        color: $widget_selected_fg;
        background-color: $widget_selected_bg;
    }
}
// hover
.window .title, .tab, .tabs, .widgetlistitem, .button, .imageviewer {
    &:hover {
        color: $widget_hover_fg;
        background-color: $widget_hover_bg;
    }
}
.focused .keyhint {
    text-decoration: underline;
}
.label {
    color: transparentize($widget_fg, 0.2);
    font: $font_general;
    padding: 0 0.5em;
    text-shadow: transparentize(white, 0.5) 0 1px 0px;
}
.focused.label, .tabs:focus .tab.current {
    color: $widget_selected_fg;
    text-shadow: transparentize(black, 0.7) 0 -1px 0px;
}
.current.label {
    color: $widget_current_fg;
    text-shadow: 0;
}

.buttonbox {
    width: 100%;
    text-align: right;
}
.buttonbox .button {
    &.first {
        @include rounded(2em, top, left);
        @include rounded(2em, bottom, left);
    }
    &.last {
        @include rounded(2em, top, right);
        @include rounded(2em, bottom, right);
    }
}
.button.label {
    padding: 0.2em 0.4em;
    text-shadow: transparentize(white, 0.5) 0 1px 0px;
}
.button {
    cursor: pointer;
    display: inline-block;
    text-align: center;
    margin: 6px 6px;

    border: 1px transparentize(black, 0.6) solid;
    @include box-shadow(inset 0 0 5px transparentize(white, 0.1));

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0,  $widget_bg*0.8),
        color-stop(.5, $widget_bg),
        color-stop(1,  $widget_bg*1.1)
    );
    background-image: -moz-linear-gradient(
        center bottom,
        $widget_bg*0.8 0%,
        $widget_bg     50%,
        $widget_bg*1.1 100%
    );

    &:hover {
        color: $button_hover_fg;
        @include box-shadow(inset 0 0 10px transparentize($button_hover_bg, 0));
    }
    &:focus {
        color: $button_selected_fg;
        @include box-shadow(inset 0 0 10px transparentize($button_selected_bg, 0));
    }
}
.multilineedit, .lineedit {
    color: $edit_fg;
    background-color: $edit_bg;
    border-color: $widget_bg * 1.6;
    text-shadow: white 0 0 0;


    font: $font_edit;
    margin: 0.2em 0.5em;

    @include inset();

    &.focused {
        color: $edit_focused_fg;
        background-color: $edit_focused_bg;
        text-shadow: black 0 0 0;
    }
}
.cs {overflow:auto}
.multilineedit .cs {padding:0 16px 16px 0}
.textedit {
    min-width:6ex;
    max-width:80ex;
}
.lineedit .cs {
    .linenumber {display:none}
}
.multilineedit .cs {
    display:block;
    min-height:2em;
    max-height:12em;
}
.cursor {
    border-left: 1px solid $edit_fg;
}
.textedit.focused .c.selected {
    color: $edit_selected_fg;
    background-color: $edit_selected_bg;
}
.linenumber {
    font: $font_linenumber;
    color: $linenumber_fg;
    background-color: $linenumber_bg;
    padding-right: 0.5em;
}
.textedit.focused .l.current {
    .c {
        color: $line_current_fg;
        //background-color: $line_current_bg;
    }

    .linenumber {
        color: $linenumber_current_fg;
        //background-color: $linenumber_current_bg;
    }
}
.tabs {
    .tab.current {
        color: $widget_current_fg;
        background-color: $widget_current_bg;
    }
    &:focus .tab.current {
        color: $widget_selected_fg;
    }
    &:focus .selection {
        background-color: $widget_selected_bg;
    }
    &.horizontal {
        padding:0.5em;
        padding-bottom:0;

        .tab {
            display: inline;

            /* don't put tab on multiple lines */
            display: inline-block;
            white-space: nowrap;

            padding: 0.2em 0.3em;
            margin: 0.4em 0.5em 0 0.5em;

            @include rounded($tab_radius, top, left);
            @include rounded($tab_radius, top, right);
            @include box-shadow(0 -2px 3px transparentize($widget_bg*0.4, 0.6));

            padding-bottom: 1em;
            background-image: -webkit-gradient(
                linear,
                left top,
                left bottom,
                color-stop(.0, transparentize($widget_bg*1.3, 0.5)),
                color-stop(.6, transparentize($widget_bg, 1)),
                color-stop(1, $widget_bg)
            );
            background-image: -moz-linear-gradient(
                center top,
                transparentize($widget_bg*1.3, 0.5) 0%,
                transparentize($widget_bg, 1)       60%,
                $widget_bg 100%
            );
        }
        .selection {
            @include selection();

            @include rounded($tab_radius, top, left);
            @include rounded($tab_radius, top, right);

            background-color:rgba(255,255,255,0.2);
        }
    }
    &.vertical {
        float: left;

        .tab {
            display: block;

            margin: 1.2em 0 1.2em 0.8em;

            @include rounded(0, top, left);
            @include rounded(0, top, right);
            @include rounded($tab_radius, top, left);
            @include rounded($tab_radius, bottom, left);
            @include box-shadow(-2px 0 3px transparentize($widget_bg*0.4, 0.6));

            padding-bottom: 0.4em;
            padding-right: 1em;
            background-image: -webkit-gradient(
                linear,
                left top,
                right top,
                color-stop(.0,  transparentize($widget_bg*1.3, 0.5)),
                color-stop(.6,  transparentize($widget_bg, 1)),
                color-stop(1, $widget_bg)
            );
            background-image: -moz-linear-gradient(
                left center,
                transparentize($widget_bg*1.3, 0.5) 0%,
                transparentize($widget_bg, 1)       60%,
                $widget_bg 100%
            );
        }
        .selection {
            @include selection();

            @include rounded(0, top, left);
            @include rounded(0, top, right);
            @include rounded($tab_radius, top, left);
            @include rounded($tab_radius, bottom, left);

            border-bottom: 0 solid transparent;
        }
    }
}
.pages {
    float: left;
}
.widgetlist {
    margin:auto;
    padding: 1em;
    text-align: left;

    .selection {
        @include rounded($item_radius);
    }
    .selection {
        @include selection();

        opacity: 0;
        background-color: $widget_selected_bg;
    }
    &.focused .selection {
        opacity: 1;
    }
}
.widgetlistitem {
    &:nth-child(even) {
        background-color: $widget_bg * 1.1;
    }
    &, &:nth-child(even) {
        padding: 0.2em 0;
        margin: 0.3em;
        @include rounded($item_radius);

        &.focused {
            background-color: $widget_selected_bg;
        }
        &:hover {
            background-color: $widget_hover_bg;
        }
    }
}
.viewer, .viewer table {
    width: 100%;
    height: 100%;
    overflow: auto;
}
.viewer .view {
    text-align: center;
}
.viewer .imageview {
    display:inline-block;
}
.imageview img {padding:$imageview_padding}
.viewer .table {margin:auto}
.window {
	color: transparentize(white, 0.6);
    opacity: $window_opacity;

	z-index: $window_layer; /* on top */

    position: absolute;

    background: $widget_bg;
    @include rounded(5px);
    @include outset();
    @include rounded($window_radius);
    .body {
        max-width: 100%;
        max-height: 100%;
        overflow: auto;
    }
    .title, .body {
        margin: 3px 3px;
    }
    .title {
        font: $font_header;
        padding: 0.1em 0.5em;

        color: transparentize($widget_fg, 0.2);
        background-color: $widget_bg;
        @include rounded($title_radius);
        @include inset();
    }
    // focused window on top
    &.focused {
        z-index: $top_window_layer;
        opacity: $top_window_opacity;
        .title {
            color: $widget_selected_fg;
            background-color: $widget_selected_bg;
            &:focus {
                color: black;
                background-color: $widget_selected_bg*1.5;
            }
        }
    }
    // button characters at: http://www.utf8-chartable.de/unicode-utf8-table.pl
    .window_control {
        opacity: 0.5;
        float: left;
        &:hover, &:focus {
            opacity: 1;
            color: white;
            text-shadow: #ddd 0 0 7px;
        }
    }
    .close {
        &:before {
          content: '\2297';
        }
    }
    .maximize {
        padding-right: 0.5em;
        &:before {
          content: '\2299';
        }
    }
}

